From 1b66123494133a24f65b404eb6d83b1ac0780f0c Mon Sep 17 00:00:00 2001
From: Cyprian Lech <clech@plume.com>
Date: Tue, 6 Oct 2020 07:51:54 +0000
Subject: [PATCH 1/7] inet: start dhcps always

This patch enables the dhcp server by default. 3rd party platforms
(for instance RDK-based) need this, as the dhcp server is independent of
OpenSync there.
---
 src/lib/inet/src/inet_base.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

diff --git a/src/lib/inet/src/inet_base.c b/src/lib/inet/src/inet_base.c
index 565839e..e62f1fd 100644
--- a/src/lib/inet/src/inet_base.c
+++ b/src/lib/inet/src/inet_base.c
@@ -413,7 +413,7 @@ bool inet_base_init(inet_base_t *self, const char *ifname)
                                     inet_unit(INET_BASE_NETWORK,
                                                 inet_unit_s(INET_BASE_SCHEME_NONE, NULL),
                                                 inet_unit(INET_BASE_SCHEME_STATIC,
-                                                          inet_unit(INET_BASE_DHCP_SERVER, NULL),
+                                                          inet_unit_s(INET_BASE_DHCP_SERVER, NULL),
                                                           inet_unit(INET_BASE_DNS, NULL),
                                                           NULL),
                                                 inet_unit(INET_BASE_SCHEME_DHCP, NULL),
@@ -1789,8 +1789,6 @@ bool inet_base_dhcp_server_commit(inet_base_t *self, bool start)
     if (self->in_dhcps != NULL) osn_dhcp_server_del(self->in_dhcps);
     self->in_dhcps = NULL;
 
-    if (!start) return true;
-
     /*
      * Create new DHCPv4 object
      */
-- 
2.25.1

